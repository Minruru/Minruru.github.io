<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>第一次去東京就上手｜朝聖MyGO、孤獨搖滾旅遊手冊</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #f8f9fa;
            color: #343a40;
        }
        .font-display {
            font-family: 'Noto Sans TC', sans-serif;
            font-weight: 700;
        }
        .gradient-text {
            background: linear-gradient(45deg, #4f46e5, #ec4899);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .tab-btn.active {
            background-color: #ec4899;
            color: white;
        }
        .category-tab-btn.active {
            background-color: #4f46e5;
            color: white;
        }
        .attraction-tab-btn.active, .transportation-tab-btn.active {
            background-color: #6d28d9;
            color: white;
        }
        .interactive-checklist input:checked + label::before {
            background-color: #ec4899;
            border-color: #ec4899;
        }
        .interactive-checklist input:checked + label {
            text-decoration: line-through;
            color: #6b7280;
        }
        main > section {
            padding-top: 4rem;
            padding-bottom: 4rem;
        }
        @media (min-width: 768px) {
            main > section {
                padding-top: 6rem;
                padding-bottom: 6rem;
            }
        }
        .tabelog-link {
            color: #c026d3 !important;
            font-weight: 500;
            text-decoration: underline;
        }
        .tabelog-link:hover {
            color: #ec4899 !important;
        }
        .attraction-tab-btn {
            border-radius: 9999px;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <!-- Cover Page -->
    <div class="h-screen bg-cover bg-center flex flex-col justify-center items-center text-white text-center p-4" style="background-image: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url('https://images.unsplash.com/photo-1542051841857-5f90071e7989?q=80&w=2070&auto=format&fit=crop');">
        <h1 class="font-display text-5xl md:text-7xl font-bold drop-shadow-lg">第一次去東京就上手</h1>
        <p class="mt-4 text-lg md:text-xl max-w-2xl drop-shadow-md">您的專屬動漫聖地與美食探險之旅</p>
        <button onclick="document.getElementById('overview').scrollIntoView({behavior: 'smooth'});" class="mt-8 px-8 py-3 bg-pink-500 hover:bg-pink-600 text-white font-bold rounded-full shadow-lg transition-transform transform hover:scale-105">
            開始探索
        </button>
    </div>

    <!-- Sticky Header -->
    <header class="sticky top-0 z-50 bg-white/80 backdrop-blur-lg shadow-md">
        <nav class="container mx-auto px-6 py-3 flex justify-between items-center">
            <div class="font-display text-2xl font-bold gradient-text">東京動漫聖地巡禮</div>
            <div class="hidden lg:flex items-center space-x-6">
                <a href="#overview" class="text-gray-600 hover:text-pink-500 transition">總覽</a>
                <a href="#itinerary" class="text-gray-600 hover:text-pink-500 transition">每日行程</a>
                <a href="#attractions" class="text-gray-600 hover:text-pink-500 transition">景點美食</a>
                <a href="#transportation" class="text-gray-600 hover:text-pink-500 transition">交通資訊</a>
                <a href="#budget" class="text-gray-600 hover:text-pink-500 transition">預算分析</a>
                <a href="#shopping-list" class="text-gray-600 hover:text-pink-500 transition">購物清單</a>
                <a href="#checklist" class="text-gray-600 hover:text-pink-500 transition">行前準備</a>
            </div>
            <div class="lg:hidden">
                <select id="mobile-nav" class="border border-gray-300 rounded-md p-2" onchange="document.querySelector(this.value).scrollIntoView({behavior: 'smooth'});">
                    <option value="#overview">總覽</option>
                    <option value="#itinerary">每日行程</option>
                    <option value="#attractions">景點美食介紹</option>
                    <option value="#transportation">交通資訊</option>
                    <option value="#budget">預算分析</option>
                    <option value="#shopping-list">購物清單</option>
                    <option value="#checklist">行前準備</option>
                </select>
            </div>
        </nav>
    </header>

    <main class="container mx-auto px-6">

        <!-- Overview Section -->
        <section id="overview" class="scroll-mt-20">
            <div class="text-center mb-16">
                <h2 class="font-display text-4xl font-bold gradient-text">行程總覽</h2>
                <p class="mt-2 text-lg text-gray-600">一目了然您的東京之旅核心資訊：費用、時間與目的地。</p>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-12">
                <div class="bg-white p-6 rounded-xl shadow-lg text-center">
                    <span class="text-4xl">💰</span>
                    <h3 class="mt-2 text-lg font-semibold text-gray-500">預估總費用</h3>
                    <p id="totalCost" class="text-3xl font-bold text-indigo-600"></p>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-lg text-center">
                    <span class="text-4xl">🗓️</span>
                    <h3 class="mt-2 text-lg font-semibold text-gray-500">旅行期間</h3>
                    <p class="text-3xl font-bold text-indigo-600">6天5夜</p>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-lg text-center">
                    <span class="text-4xl">📍</span>
                    <h3 class="mt-2 text-lg font-semibold text-gray-500">核心目的地</h3>
                    <p class="text-2xl font-bold text-indigo-600">下北澤/澀谷/秋葉原</p>
                </div>
            </div>
            <div class="bg-white p-6 rounded-xl shadow-lg">
                <h3 class="font-display text-2xl font-bold text-center mb-6">預算費用分佈</h3>
                <div class="chart-container h-80 mx-auto" style="max-width: 400px;">
                    <canvas id="budgetDonutChart"></canvas>
                </div>
            </div>
        </section>

        <!-- Itinerary Section -->
        <section id="itinerary" class="scroll-mt-20">
            <div class="text-center mb-16">
                <h2 class="font-display text-4xl font-bold gradient-text">每日行程規劃</h2>
                <p class="mt-2 text-lg text-gray-600">點擊下方日期，探索每一天的詳細活動與動漫聖地巡禮！</p>
            </div>
            <div class="tabs flex flex-wrap justify-center gap-2 mb-8">
                <button data-tab="day1" class="tab-btn px-4 py-2 rounded-full font-semibold transition bg-gray-200 hover:bg-pink-500 hover:text-white active">Day 1 (8/18 一)</button>
                <button data-tab="day2" class="tab-btn px-4 py-2 rounded-full font-semibold transition bg-gray-200 hover:bg-pink-500 hover:text-white">Day 2 (8/19 二)</button>
                <button data-tab="day3" class="tab-btn px-4 py-2 rounded-full font-semibold transition bg-gray-200 hover:bg-pink-500 hover:text-white">Day 3 (8/20 三)</button>
                <button data-tab="day4" class="tab-btn px-4 py-2 rounded-full font-semibold transition bg-gray-200 hover:bg-pink-500 hover:text-white">Day 4 (8/21 四)</button>
                <button data-tab="day5" class="tab-btn px-4 py-2 rounded-full font-semibold transition bg-gray-200 hover:bg-pink-500 hover:text-white">Day 5 (8/22 五)</button>
                <button data-tab="day6" class="tab-btn px-4 py-2 rounded-full font-semibold transition bg-gray-200 hover:bg-pink-500 hover:text-white">Day 6 (8/23 六)</button>
            </div>
            <div class="bg-white p-6 md:p-8 rounded-xl shadow-lg prose-custom">
                <!-- Itinerary content will be dynamically inserted here -->
            </div>
        </section>

        <!-- Attractions Section -->
        <section id="attractions" class="scroll-mt-20">
            <div class="text-center mb-16">
                <h2 class="font-display text-4xl font-bold gradient-text">景點、美食介紹</h2>
                <p class="mt-2 text-lg text-gray-600">深入了解行程中各個地點的特色與推薦資訊。</p>
            </div>
            <div class="tabs flex flex-wrap justify-center gap-2 mb-8">
                <button data-category-tab="category-shimokita" class="category-tab-btn px-4 py-2 rounded-full font-semibold transition bg-gray-200 hover:bg-indigo-600 hover:text-white active">下北澤區域</button>
                <button data-category-tab="category-shibuya-shinjuku" class="category-tab-btn px-4 py-2 rounded-full font-semibold transition bg-gray-200 hover:bg-indigo-600 hover:text-white">澀谷/新宿區域</button>
                <button data-category-tab="category-mygo-area" class="category-tab-btn px-4 py-2 rounded-full font-semibold transition bg-gray-200 hover:bg-indigo-600 hover:text-white">MyGO!!!!!聖地</button>
                <button data-category-tab="category-akiba" class="category-tab-btn px-4 py-2 rounded-full font-semibold transition bg-gray-200 hover:bg-indigo-600 hover:text-white">秋葉原/人形町</button>
            </div>
            <div class="bg-white p-6 md:p-8 rounded-xl shadow-lg prose-custom">
                <!-- Attractions content will be dynamically inserted here -->
            </div>
        </section>

        <!-- Transportation Section -->
        <section id="transportation" class="scroll-mt-20">
            <div class="text-center mb-16">
                <h2 class="font-display text-4xl font-bold gradient-text">交通資訊</h2>
                <p class="mt-2 text-lg text-gray-600">各主要景點與餐廳之間的移動方式與交通費用概覽。</p>
            </div>
            <div class="bg-white p-6 md:p-8 rounded-xl shadow-lg prose-custom">
                <!-- Transportation content will be dynamically inserted here -->
            </div>
        </section>

        <!-- Budget Section -->
        <section id="budget" class="scroll-mt-20">
            <div class="text-center mb-16">
                <h2 class="font-display text-4xl font-bold gradient-text">預算分析</h2>
                <p class="mt-2 text-lg text-gray-600">深入了解各項開銷的細節，有效控管您的旅行預算。</p>
            </div>
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <div class="bg-white p-6 rounded-xl shadow-lg">
                    <h3 class="font-display text-2xl font-bold text-center mb-6">各項費用比較 (JPY)</h3>
                    <div class="chart-container h-96">
                        <canvas id="expenseBarChart"></canvas>
                    </div>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-lg">
                    <h3 class="font-display text-2xl font-bold text-center mb-6">費用明細表</h3>
                    <table class="w-full">
                        <thead>
                            <tr class="border-b-2 border-gray-200">
                                <th class="py-2 text-left">費用類別</th>
                                <th class="py-2 text-right">費用 (JPY)</th>
                                <th class="py-2 text-right">費用 (NTD)</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                        <tfoot></tfoot>
                    </table>
                    <p class="text-xs text-gray-500 mt-2 text-right">*日圓與台幣換算匯率以0.21估算，實際費用可能變動。</p>
                </div>
            </div>
        </section>

        <!-- Shopping List Section -->
        <section id="shopping-list" class="scroll-mt-20">
            <div class="text-center mb-16">
                <h2 class="font-display text-4xl font-bold gradient-text">購物 & 伴手禮清單</h2>
                <p class="mt-2 text-lg text-gray-600">確保不漏掉任何想買的物品或送給親友的伴手禮！</p>
            </div>
            <div class="bg-white p-6 md:p-8 rounded-xl shadow-lg interactive-checklist" id="shopping-checklist">
                <!-- Shopping list content will be dynamically inserted here -->
            </div>
        </section>

        <!-- Checklist Section -->
        <section id="checklist" class="scroll-mt-20">
            <div class="text-center mb-16">
                <h2 class="font-display text-4xl font-bold gradient-text">行前準備清單</h2>
                <p class="mt-2 text-lg text-gray-600">確保萬事俱備，讓您的旅程順暢無憂。</p>
            </div>
            <div class="bg-white p-6 md:p-8 rounded-xl shadow-lg interactive-checklist" id="pre-trip-checklist">
                <!-- Pre-trip checklist content will be dynamically inserted here -->
            </div>
        </section>

    </main>

    <footer class="bg-gray-200 text-center py-8 mt-12">
        <p class="text-gray-600">此互動儀表板根據您提供的旅遊報告生成。</p>
    </footer>
    
    <script>
    // Content data (to be inserted dynamically)
    const contentData = {
        itinerary: `
            <div id="day1" class="tab-content">
                <h3 class="font-display text-2xl mb-4">Day 1 (8/18 一): 抵達與下北澤探索</h3>
                <p>抵達東京成田機場(NRT)後，搭乘 N'EX 至澀谷，再轉乘京王井之頭線抵達充滿文青與復古風情的下北澤。入住飯店後，準備開始您的《孤獨搖滾！》聖地巡禮！</p>
                <ul class="list-none space-y-2">
                    <li>🛌 08:00-09:30 起床梳洗，準備行李</li>
                    <li>✈️ 09:30-11:30 抵達桃園國際機場</li>
                    <li>📝 11:30-12:30 準備登機手續並過關</li>
                    <li>🍔 12:30-14:15 過關後在機場進食</li>
                    <li>🛫 14:15-18:35 (日本時間 13:15-17:35) 桃園國際機場到東京成田機場</li>
                    <li>🏨 18:35-20:30 搭車前往下北澤芥末飯店</li>
                    <li>🛒 20:30-21:30 在附近超商買晚餐回飯店食用</li>
                    <li>🛀 21:30-22:30 洗澡</li>
                    <li>📱 22:30-23:00 調整手機時間為日本時間</li>
                    <li>😴 23:00-07:00 睡覺</li>
                </ul>
            </div>
            <div id="day2" class="tab-content hidden">
                <h3 class="font-display text-2xl mb-4">Day 2 (8/19 二): 下北澤探索</h3>
                <p>今日將深度探索下北澤，進行《孤獨搖滾！》聖地巡禮，並品嚐當地特色美食。</p>
                <ul class="list-none space-y-2">
                    <li>🛌 07:00-08:00 起床梳洗</li>
                    <li>☕ 08:00-09:00 附近超商吃早餐</li>
                    <li>🎸 09:00-12:00 前往孤獨搖滾聖地Shelter Live House (STARRY原型)、🅿️ Times 下北澤第八停車場 (團體照拍攝地)</li>
                    <li>🍛 12:00-13:30 午餐 路地裏咖哩 侍 下北澤店 用餐</li>
                    <li>🛍️ 13:30-15:30 探索下北澤一番街的獨特店鋪與古著店</li>
                    <li>🍮 16:00-17:00 白髭泡芙工房 吃龍貓泡芙</li>
                    <li>🚶 17:00-18:00 在下北澤街道繼續閒逛</li>
                    <li>🍔 18:00-19:00 Village Vanguard Diner Shimokitazawa 用餐（已預訂）</li>
                    <li>🌃 19:00-20:00 到下北澤夜市逛逛，看有沒有便宜衣服</li>
                    <li>🚿 20:00-22:00 回到飯店洗澡休息</li>
                    <li>✅ 22:00-23:00 確認隔日行程並準備睡覺</li>
                    <li>😴 23:00-07:00 睡覺</li>
                </ul>
            </div>
            <div id="day3" class="tab-content hidden">
                <h3 class="font-display text-2xl mb-4">Day 3 (8/20 三): 澀谷、新宿一日遊 & 前進秋葉原</h3>
                <p>前往新宿、澀谷逛逛吃美食，傍晚，搭乘JR線前往動漫與電子的聖地——秋葉原，並入住新飯店。</p>
                <ul class="list-none space-y-2">
                    <li>🛌 07:00-08:00 起床梳洗</li>
                    <li>🏨 08:00-08:30 準備退房離開飯店</li>
                    <li>☕ 08:30-9:30 えくぶり 用餐</li>
                    <li>🚆 9:30-10:20 從東北澤車站搭車到四谷站</li>
                    <li>🪙 10:20-12:00 前往Tokyo Bitcoin Base，與當地人交流產業與推薦的幣圈餐廳與景點</li>
                    <li>🚚 12:00-13:00 在Tokyo Bitcoin Base周遭的餐車用餐（可使用比特幣支付）</li>
                    <li>🛍️ 13:00-13:40 前往ユニクロ 渋谷道玄坂店、涉谷GU</li>
                    <li>👕 13:40-17:00 在上述地點採買衣服（也要幫老媽買）</li>
                    <li>🚶 17:00-17:30 抵達吟味焼肉 じゃんか 道玄坂</li>
                    <li>🍖 17:30-19:00 在吟味焼肉 じゃんか 道玄坂用餐（已預訂）</li>
                    <li>🧳 19:00-20:00 搭車前往東京中央大飯店 Check In</li>
                    <li>🏪 20:00-21:00 逛一下飯店周邊與超商購買零食與明天早餐</li>
                    <li>🛀 21:00-22:30 回到飯店洗澡休息</li>
                    <li>✅ 22:30-23:00 確認明天行程</li>
                    <li>😴 23:00-07:00 睡覺</li>
                </ul>
            </div>
            <div id="day4" class="tab-content hidden">
                <h3 class="font-display text-2xl mb-4">Day 4 (8/21 四): 《MyGO!!!!!》聖地巡禮日</h3>
                <p>今日是《MyGO!!!!!》的聖地巡禮日！前往飛鳥山公園、舊古河庭園，朝聖爽世與祥子戰鬥過，以及祥子成為人類的橋。</p>
                <ul class="list-none space-y-2">
                    <li>🛌 07:00-08:00 起床梳洗</li>
                    <li>☕ 08:00-09:30 吃昨天準備的早餐</li>
                    <li>🌳 09:30-10:00 搭車前往飛鳥山公園</li>
                    <li>🚶‍♀️ 10:00-11:00 朝聖爽世與祥子戰鬥過的地方，可搭鐵軌逛公園</li>
                    <li>🏡 11:00-11:20 走路前往舊古河庭園</li>
                    <li>🌸 11:20-12:20 在舊古河庭園朝聖祥子的家</li>
                    <li>🚶 12:00-12:10 到旁邊的ココフル</li>
                    <li>🍔 12:10-13:40 在ココフル 用餐</li>
                    <li>🚗 13:40-14:30 搭車前往千登世步道橋，朝聖成為人類橋</li>
                    <li>🤝 14:30-15:30 在千登世步道橋周圍逛逛（可提早離開）</li>
                    <li>🚆 15:30-16:10 搭車回到東京中央大飯店</li>
                    <li>😴 16:10-17:00 在飯店休息</li>
                    <li>🚶‍♀️ 17:00-17:30 搭車前往人形町今半 銀座店</li>
                    <li>🍲 17:30-19:30 在 人形町今半 銀座店 用餐（已預訂）</li>
                    <li>🛒 19:30-20:30 回到飯店購買隔日早餐</li>
                    <li>🚿 20:30-22:00 回到飯店洗澡休息</li>
                    <li>✅ 22:00-23:00 確認明天行程</li>
                    <li>😴 23:00-07:00 睡覺</li>
                </ul>
            </div>
            <div id="day5" class="tab-content hidden">
                <h3 class="font-display text-2xl mb-4">Day 5 (8/22 五): 秋葉原動漫之旅</h3>
                <p>今日將深度探索秋葉原的動漫文化，從電器、模型到各式周邊商品，讓您滿載而歸！</p>
                <ul class="list-none space-y-2">
                    <li>🛌 07:00-08:00 起床梳洗</li>
                    <li>☕ 08:00-10:00 吃飯店的早餐或者附近超商</li>
                    <li>📺 10:00-12:00 前往秋葉原ラジオ會館</li>
                    <li>🚶 12:00-12:30 前往とんこつラーメン博多風龍 秋葉原総本店</li>
                    <li>🍛 12:30-14:00 在とんこつラーメン博多風龍 秋葉原総本店 用餐（無法預約）</li>
                    <li>🎮 14:00-17:00 繼續逛秋葉原ラジオ會館、e-earphone 秋葉原店等店面</li>
                    <li>🛍️ 17:00-18:00 前往SEEKBASE、2k540手工藝品店逛逛</li>
                    <li>🍜 18:00-19:30 前往とんかつ檍のカレー屋 いっぺこっぺ 秋葉原店 用餐（無法預約）</li>
                    <li>🛒 19:30-20:30 先買明天早餐並回到飯店</li>
                    <li>🚿 20:30-22:00 回到飯店洗澡休息</li>
                    <li>✅ 22:00-23:00 確認明天行程與退房時間</li>
                    <li>😴 23:00-08:00 睡覺</li>
                </ul>
            </div>
            <div id="day6" class="tab-content hidden">
                <h3 class="font-display text-2xl mb-4">Day 6 (8/23 六): 伴手禮採買日&啟程返家</h3>
                <p>整理行囊，享受在東京的最後一天。從秋葉原地區購買伴手禮，中午隨意吃喝，下午搭車到成田機場，準備搭晚上的班機平安返家。</p>
                <ul class="list-none space-y-2">
                    <li>🛌 08:00-09:00 起床梳洗吃早餐</li>
                    <li>🏨 09:00-10:00 準備行李與確認重要物品並退房</li>
                    <li>🚶‍♀️ 10:00-10:30 前往秋葉原ラジオ會館</li>
                    <li>🛍️ 10:30-12:30 在會館一樓的ギフトショップ The AkiBa 購買伴手禮、在附近的全家購買蘋果乾兩包（子儀伴手禮）</li>
                    <li>🍜 12:30-14:30 隨便找一間店用餐</li>
                    <li>🚆 14:30-16:30 搭車前往成田機場</li>
                    <li>🛂 16:30-17:30 在機場準備登機手續，並調整手機時間為台灣時間</li>
                    <li>🍔 17:30-19:30 用餐並等待搭接駁車</li>
                    <li>🚌 19:30-20:30 搭接駁車到登機處</li>
                    <li>🛫 20:30-23:35 (台灣時間 19:30-22:35) 揮手告別東京，搭機返回台灣</li>
                    <li>🚕 22:35-23:35 搭計程車前往肥肥的大叔叔家</li>
                </ul>
            </div>
        `,
        attractions: `
            <!-- Shimokitazawa Category -->
            <div id="category-shimokita" class="category-tab-content">
                <div class="tabs">
                    <button data-attraction-tab="hotel-mustard" class="attraction-tab-btn active">下北澤芥末飯店</button>
                    <button data-attraction-tab="shelter-live-house" class="attraction-tab-btn">Shelter Live House</button>
                    <button data-attraction-tab="times-parking" class="attraction-tab-btn">Times停車場</button>
                    <button data-attraction-tab="curry-samurai" class="attraction-tab-btn">路地裏咖哩 侍</button>
                    <button data-attraction-tab="shirahige-choux" class="attraction-tab-btn">白髭泡芙工房</button>
                    <button data-attraction-tab="village-vanguard-diner" class="attraction-tab-btn">Village Vanguard Diner</button>
                    <button data-attraction-tab="ekuburi" class="attraction-tab-btn">えくぶり</button>
                </div>
                <div class="mt-8">
                    <div id="hotel-mustard" class="attraction-content">
                        <h4 class="font-display text-xl">下北澤芥末飯店 (MUSTARD HOTEL SHIMOKITAZAWA) 🏨</h4>
                        <p>位於下北澤心臟地帶的設計旅店，以其簡約時尚的風格和便利的地理位置著稱，是體驗下北澤文創氛圍的絕佳起點。</p>
                    </div>
                    <div id="shelter-live-house" class="attraction-content hidden">
                         <h4 class="font-display text-xl">Shelter Live House (STARRY原型) 🎤</h4>
                         <p>東京歷史悠久的知名 Live House，也是《孤獨搖滾！》中「STARRY」Live House 的原型。</p>
                    </div>
                    <div id="times-parking" class="attraction-content hidden">
                         <h4 class="font-display text-xl">Times 下北澤第八停車場 (團體照拍攝地) 🅿️</h4>
                         <p>因《孤獨搖滾！》動畫中「團結Band」在此拍攝經典團體照而聞名，成為粉絲們爭相模仿拍照的聖地。</p>
                    </div>
                    <div id="curry-samurai" class="attraction-content hidden">
                         <h4 class="font-display text-xl">路地裏咖哩 侍 下北澤店 🍛</h4>
                         <p>下北澤地區知名的湯咖哩專賣店，以其豐富的蔬菜、濃郁的湯頭和多樣的客製化選擇受到歡迎。</p>
                         <ul class="list-none space-y-1 mt-4 text-sm">
                            <li><strong>推薦料理：</strong>招牌湯咖哩，可選擇辣度、湯頭種類和多種配料（如雞腿、豬肉、海鮮或各式蔬菜）。</li>
                            <li><strong>每人平均用餐價位：</strong>￥1,320 - ￥2,255</li>
                            <li><strong>支付方式：</strong>不接受信用卡付款、不接受電子現金、接受PayPay支付（QRCode）</li>
                            <li><strong>參考資料：</strong><a class="tabelog-link" href="https://tabelog.com/tw/tokyo/A1318/A131802/13165636/dtlmenu/" target="_blank">日本餐廳評論網站</a></li>
                         </ul>
                    </div>
                    <div id="shirahige-choux" class="attraction-content hidden">
                         <h4 class="font-display text-xl">白髭泡芙工房 🍮</h4>
                         <p>宮崎駿動畫迷必訪的可愛咖啡廳！這裡提供獨特的龍貓造型泡芙，造型可愛，內餡口味多樣。</p>
                         <ul class="list-none space-y-1 mt-4 text-sm">
                            <li><strong>推薦料理：</strong>龍貓造型泡芙 (口味有卡士達、巧克力、季節限定等)。</li>
                            <li><strong>每人平均用餐價位：</strong>￥999</li>
                            <li><strong>支付方式：</strong>不接受信用卡付款、不接受電子現金、接受PayPay支付（QRCode）</li>
                            <li><strong>參考資料：</strong><a class="tabelog-link" href="https://tabelog.com/tw/tokyo/A1318/A131812/13161008/" target="_blank">日本餐廳評論網站</a></li>
                         </ul>
                    </div>
                    <div id="village-vanguard-diner" class="attraction-content hidden">
                         <h4 class="font-display text-xl">Village Vanguard Diner Shimokitazawa 🍔</h4>
                         <p>由知名雜貨店經營的漢堡店，以其「大人漢堡」為特色，嚴選食材，提供美味且令人愉悅的正宗漢堡體驗。</p>
                         <ul class="list-none space-y-1 mt-4 text-sm">
                            <li><strong>推薦料理：</strong>多汁的牛肉餅漢堡，如鳳梨燒烤漢堡、辣椒起司漢堡等。</li>
                            <li><strong>每人平均用餐價位：</strong>午餐約 ¥1,000 - ¥1,999；晚餐約 ¥2,000 - ¥2,999。</li>
                            <li><strong>支付方式：</strong>接受信用卡付款、電子現金（部分電子錢包）、PayPay支付（QRCode）</li>
                            <li><strong>參考資料：</strong><a class="tabelog-link" href="https://tabelog.com/tw/tokyo/A1318/A131802/13022465/" target="_blank">日本餐廳評論網站</a></li>
                         </ul>
                    </div>
                     <div id="ekuburi" class="attraction-content hidden">
                         <h4 class="font-display text-xl">えくぶり ☕</h4>
                         <p>這是一家提供舒適早餐體驗的咖啡店，適合在行程開始前享用一份悠閒的早點。</p>
                         <ul class="list-none space-y-1 mt-4 text-sm">
                             <li><strong>推薦料理：</strong>日式早餐套餐、各式吐司、咖啡等。</li>
                             <li><strong>每人平均用餐價位：</strong>￥999</li>
                             <li><strong>參考資料：</strong><a class="tabelog-link" href="https://tabelog.com/tokyo/A1318/A131802/13243840/" target="_blank">Tabelog 連結</a></li>
                         </ul>
                    </div>
                </div>
            </div>
            <!-- Shibuya/Shinjuku Category -->
            <div id="category-shibuya-shinjuku" class="category-tab-content hidden">
                <div class="tabs">
                    <button data-attraction-tab="uniqlo-shibuya" class="attraction-tab-btn active">ユニクロ 渋谷道玄坂店</button>
                    <button data-attraction-tab="gu-shibuya" class="attraction-tab-btn">GU 渋谷店</button>
                    <button data-attraction-tab="janka-dogenzaka" class="attraction-tab-btn">吟味焼肉 じゃんか 道玄坂</button>
                    <button data-attraction-tab="tokyo-bitcoin-base" class="attraction-tab-btn">Tokyo Bitcoin Base</button>
                    <button data-attraction-tab="imahan-ginza" class="attraction-tab-btn">人形町今半 銀座店</button>
                </div>
                <div class="mt-8">
                     <div id="uniqlo-shibuya" class="attraction-content">
                         <h4 class="font-display text-xl">ユニクロ 渋谷道玄坂店 👕</h4>
                         <p>位於澀谷的 Uniqlo 分店，提供最新款式的服飾，是採購基本款與潮流單品的好去處。</p>
                    </div>
                    <div id="gu-shibuya" class="attraction-content hidden">
                         <h4 class="font-display text-xl">GU 渋谷店 👖</h4>
                         <p>Uniqlo 的姊妹品牌，以更親民的價格提供時尚潮流服飾，深受年輕人喜愛。</p>
                    </div>
                    <div id="janka-dogenzaka" class="attraction-content hidden">
                         <h4 class="font-display text-xl">吟味焼肉 じゃんか 道玄坂 🍖</h4>
                         <p>澀谷知名的燒肉店，以提供高品質的肉品（特別是和牛）聞名，讓您能品嚐到入口即化的美味燒肉。</p>
                          <ul class="list-none space-y-1 mt-4 text-sm">
                            <li><strong>推薦料理：</strong>各部位的和牛燒肉、特選拼盤。</li>
                            <li><strong>每人平均用餐價位：</strong>￥4,000－￥4,999</li>
                            <li><strong>支付方式：</strong>可接受信用卡、不接受電子現金（西瓜卡等）、接受PayPay支付（QRCode）</li>
                            <li><strong>參考資料：</strong><a class="tabelog-link" href="https://tabelog.com/tokyo/A1303/A130301/13007287/" target="_blank">日本餐廳評論網站</a></li>
                         </ul>
                    </div>
                    <div id="tokyo-bitcoin-base" class="attraction-content hidden">
                         <h4 class="font-display text-xl">Tokyo Bitcoin Base 🪙</h4>
                         <p>一個與加密貨幣、區塊鏈相關的實體空間或社群據點，吸引著對區塊鏈技術和文化感興趣的人士。</p>
                    </div>
                    <div id="imahan-ginza" class="attraction-content hidden">
                         <h4 class="font-display text-xl">人形町今半 銀座店 🍲</h4>
                         <p>創業於明治28年的壽喜燒超級名店，以最頂級的和牛與秘傳的醬汁聞名。銀座店提供極致奢華的用餐體驗。</p>
                         <ul class="list-none space-y-1 mt-4 text-sm">
                             <li><strong>推薦料理：</strong>極上壽喜燒套餐。</li>
                             <li><strong>每人平均用餐價位：</strong>￥15,000 - ￥25,000</li>
                             <li><strong>參考資料：</strong><a class="tabelog-link" href="https://tabelog.com/tw/tokyo/A1301/A130101/13002645/" target="_blank">Tabelog 連結</a></li>
                         </ul>
                    </div>
                </div>
            </div>
            <!-- MyGO!!!!! Category -->
            <div id="category-mygo-area" class="category-tab-content hidden">
                <div class="tabs">
                    <button data-attraction-tab="asukayama-park" class="attraction-tab-btn active">飛鳥山公園</button>
                    <button data-attraction-tab="kyu-furukawa-garden" class="attraction-tab-btn">舊古河庭園</button>
                     <button data-attraction-tab="chitose-bridge" class="attraction-tab-btn">千登世步道橋</button>
                     <button data-attraction-tab="cocofulu" class="attraction-tab-btn">ココフル</button>
                </div>
                <div class="mt-8">
                    <div id="asukayama-park" class="attraction-content">
                        <h4 class="font-display text-xl">飛鳥山公園 🌸</h4>
                        <p>江戶時代起就是著名的賞櫻勝地，也是《MyGO!!!!!》動畫的聖地，可以尋找動畫中爽世與祥子「戰鬥」過的噴水池等景點。</p>
                    </div>
                    <div id="kyu-furukawa-garden" class="attraction-content hidden">
                        <h4 class="font-display text-xl">舊古河庭園 🌹</h4>
                        <p>融合了日式庭園與西式洋館的獨特設計，是《MyGO!!!!!》動畫中祥子家的原型地。</p>
                    </div>
                    <div id="chitose-bridge" class="attraction-content hidden">
                        <h4 class="font-display text-xl">千登世步道橋 🌉</h4>
                        <p>《MyGO!!!!!》動畫中，祥子邀請燈組成樂團，經典的「祥子成為人類的橋」，是粉絲必訪的朝聖地點。</p>
                    </div>
                    <div id="cocofulu" class="attraction-content hidden">
                        <h4 class="font-display text-xl">ココフル ☕</h4>
                        <p>位於飛鳥山公園附近的咖啡店或簡餐店，適合在遊覽公園後稍作休息，補充能量。</p>
                         <ul class="list-none space-y-1 mt-4 text-sm">
                            <li><strong>推薦料理：</strong>通常提供咖啡、輕食、或簡餐。</li>
                            <li><strong>每人平均用餐價位：</strong>￥1,000－￥1,999</li>
                            <li><strong>支付方式：</strong>可接受信用卡、可接受電子現金（西瓜卡等）</li>
                            <li><strong>參考資料：</strong><a class="tabelog-link" href="https://tabelog.com/tokyo/A1323/A132303/13202218/" target="_blank">日本餐廳評論網站</a></li>
                         </ul>
                    </div>
                </div>
            </div>
            <!-- Akihabara/Jimbocho Category -->
            <div id="category-akiba" class="category-tab-content hidden">
                 <div class="tabs">
                    <button data-attraction-tab="hotel-grand-central" class="attraction-tab-btn active">東京中央大飯店</button>
                    <button data-attraction-tab="akiba-radio-hall" class="attraction-tab-btn">秋葉原ラジオ會館</button>
                    <button data-attraction-tab="hakata-furyu" class="attraction-tab-btn">とんこつラーメン博多風龍</button>
                    <button data-attraction-tab="e-earphone" class="attraction-tab-btn">e-earphone 秋葉原店</button>
                    <button data-attraction-tab="tonkatsu-ippe" class="attraction-tab-btn">とんかつ檍のカレー屋 いっぺこっぺ</button>
                    <button data-attraction-tab="the-akiba" class="attraction-tab-btn">ギフトショップ The AkiBa</button>
                </div>
                <div class="mt-8">
                    <div id="hotel-grand-central" class="attraction-content">
                         <h4 class="font-display text-xl">東京中央大飯店 (Grand Central Hotel, Tokyo) 🏨</h4>
                         <p>位於交通樞紐，鄰近神田、秋葉原等地，是一家提供經典舒適住宿體驗的飯店，方便前往東京各個角落。</p>
                    </div>
                    <div id="akiba-radio-hall" class="attraction-content hidden">
                         <h4 class="font-display text-xl">秋葉原ラジオ會館 🗼</h4>
                         <p>秋葉原的地標性建築之一，是動漫、模型、卡牌和偶像周邊商品的聚集地，動漫迷的天堂。</p>
                    </div>
                    <div id="hakata-furyu" class="attraction-content hidden">
                         <h4 class="font-display text-xl">とんこつラーメン博多風龍 秋葉原総本店 🍜</h4>
                         <p>提供正宗的博多豚骨拉麵，以其濃郁的湯頭和可以免費續加兩次的細麵為特色，CP值極高。</p>
                         <ul class="list-none space-y-1 mt-4 text-sm">
                             <li><strong>推薦料理：</strong>豚骨拉麵，可自選麵的硬度。</li>
                             <li><strong>每人平均用餐價位：</strong>￥1,000－￥1,999</li>
                             <li><strong>支付方式：</strong>不接受信用卡、可接受電子現金（西瓜卡等）、可接受PayPay支付（QRCode）</li>
                             <li><strong>參考資料：</strong><a class="tabelog-link" href="https://tabelog.com/tw/tokyo/A1311/A131101/13096267/" target="_blank">日本餐廳評論網站</a></li>
                         </ul>
                    </div>
                    <div id="e-earphone" class="attraction-content hidden">
                         <h4 class="font-display text-xl">e-earphone 秋葉原店 🎧</h4>
                         <p>耳機與音響發燒友的聖地，提供極為豐富的各品牌耳機、播放器試聽與選購服務。</p>
                    </div>
                    <div id="tonkatsu-ippe" class="attraction-content hidden">
                         <h4 class="font-display text-xl">とんかつ檍のカレー屋 いっぺこっぺ 秋葉原店 🐷</h4>
                         <p>以高品質的炸豬排和獨特的咖哩醬聞名，提供酥脆多汁的炸豬排與濃郁咖哩的完美結合。</p>
                         <ul class="list-none space-y-1 mt-4 text-sm">
                             <li><strong>推薦料理：</strong>招牌炸豬排咖哩飯。</li>
                             <li><strong>每人平均用餐價位：</strong>￥1,000－￥1,999</li>
                             <li><strong>支付方式：</strong>只接受日圓現金</li>
                             <li><strong>參考資料：</strong><a class="tabelog-link" href="https://tabelog.com/tokyo/A1311/A131101/13259701/" target="_blank">日本餐廳評論網站</a></li>
                         </ul>
                    </div>
                    <div id="the-akiba" class="attraction-content hidden">
                         <h4 class="font-display text-xl">ギフトショップ The AkiBa 🎁</h4>
                         <p>位於秋葉原ラジオ會館一樓的伴手禮店，販售各種與秋葉原、動漫文化相關的特色商品與點心。</p>
                    </div>
                </div>
            </div>
        `,
        transportation: `
            <div class="tabs">
                <button data-transportation-tab="nrt-to-mustard" class="transportation-tab-btn active">機場 → 下北澤</button>
                <button data-transportation-tab="yotsuya-to-shibuya" class="transportation-tab-btn">四谷 → 澀谷</button>
                <button data-transportation-tab="shibuya-to-kanda" class="transportation-tab-btn">澀谷 → 神田</button>
                <button data-transportation-tab="kanda-to-oji" class="transportation-tab-btn">神田 → 王子</button>
                <button data-transportation-tab="kanda-to-ginza" class="transportation-tab-btn">神田 → 銀座</button>
                <button data-transportation-tab="grand-to-nrt" class="transportation-tab-btn">飯店 → 機場</button>
            </div>
            <div class="mt-8">
                <div id="nrt-to-mustard" class="transportation-content">
                    <h4 class="font-display text-xl">成田機場 (NRT) → 下北澤芥末飯店 ✈️➡️🏨</h4>
                    <ul class="list-none space-y-1 mt-4">
                        <li><strong>方式:</strong> 成田特快 (N'EX) + 京王井之頭線</li>
                        <li><strong>說明:</strong> 搭乘N'EX至澀谷站，再轉乘京王井之頭線至下北澤站。</li>
                        <li><strong>預估費用 (每人):</strong> 約 ¥3,250</li>
                    </ul>
                </div>
                <div id="yotsuya-to-shibuya" class="transportation-content hidden">
                    <h4 class="font-display text-xl">Tokyo Bitcoin Base → 澀谷車站 🪙➡️🛍️</h4>
                    <ul class="list-none space-y-1 mt-4">
                        <li><strong>方式:</strong> JR中央・總武線 + JR山手線</li>
                        <li><strong>說明:</strong> 從四谷站搭乘JR線至新宿站，轉乘山手線至澀谷站。</li>
                        <li><strong>預估費用 (每人):</strong> 約 ¥170</li>
                    </ul>
                </div>
                <div id="shibuya-to-kanda" class="transportation-content hidden">
                    <h4 class="font-display text-xl">澀谷車站 → 神田車站 (飯店) 🛍️➡️🏨</h4>
                    <ul class="list-none space-y-1 mt-4">
                        <li><strong>方式:</strong> 東京Metro銀座線</li>
                        <li><strong>說明:</strong> 從澀谷站搭乘銀座線直達神田站。</li>
                        <li><strong>預估費用 (每人):</strong> 約 ¥200</li>
                    </ul>
                </div>
                <div id="kanda-to-oji" class="transportation-content hidden">
                    <h4 class="font-display text-xl">神田車站 → 王子車站 (飛鳥山公園) 🏨➡️🌳</h4>
                    <ul class="list-none space-y-1 mt-4">
                        <li><strong>方式:</strong> JR京濱東北線</li>
                        <li><strong>說明:</strong> 從神田站搭乘京濱東北線直達王子站。</li>
                        <li><strong>預估費用 (每人):</strong> 約 ¥170</li>
                    </ul>
                </div>
                 <div id="kanda-to-ginza" class="transportation-content hidden">
                    <h4 class="font-display text-xl">神田車站 → 銀座車站 (人形町今半) 🏨➡️🍲</h4>
                    <ul class="list-none space-y-1 mt-4">
                        <li><strong>方式:</strong> 東京Metro銀座線</li>
                        <li><strong>說明:</strong> 從神田站搭乘銀座線直達銀座站。</li>
                        <li><strong>預估費用 (每人):</strong> 約 ¥170</li>
                    </ul>
                </div>
                <div id="grand-to-nrt" class="transportation-content hidden">
                    <h4 class="font-display text-xl">東京中央大飯店 → 成田機場 (NRT) 🏨➡️✈️</h4>
                    <ul class="list-none space-y-1 mt-4">
                        <li><strong>方式:</strong> JR山手線 + 京成Skyliner</li>
                        <li><strong>說明:</strong> 從神田站搭JR至日暮里或上野，再轉乘Skyliner。</li>
                        <li><strong>預估費用 (每人):</strong> 約 ¥2,720</li>
                    </ul>
                </div>
            </div>
        `,
        shoppingList: `
            <h3 class="font-display text-2xl mb-4">購物清單 🛍️</h3>
            <ul class="list-none space-y-3">
                <li><input type="checkbox" id="shop_3c"><label for="shop_3c" class="ml-2">3C用品：藍芽耳機、手機殼與行動電源</label></li>
                <li><input type="checkbox" id="shop_clothes"><label for="shop_clothes" class="ml-2">服飾：可在UN、GQ等便宜地方購買 👕</label></li>
            </ul>
            <h3 class="font-display text-2xl mt-8 mb-4">伴手禮 🎁</h3>
            <ul class="list-none space-y-3">
                <li><input type="checkbox" id="souvenir_top"><label for="souvenir_top" class="ml-2">女性上衣（UN、GQ）👚</label></li>
                <li><input type="checkbox" id="souvenir_apple"><label for="souvenir_apple" class="ml-2">全家蘋果乾兩包 🍎</label></li>
                <li><input type="checkbox" id="souvenir_akiba"><label for="souvenir_akiba" class="ml-2">秋葉原百貨商店的伴手禮（家人、同事）🛍️</label></li>
            </ul>
        `,
        checklist: `
            <h3 class="font-display text-2xl mb-4">行前準備</h3>
            <ul class="list-none space-y-3">
                <li><input type="checkbox" id="pre_covid_vaccine"><label for="pre_covid_vaccine" class="ml-2">新冠疫苗施打 💉</label></li>
                <li><input type="checkbox" id="pre_tigerair_email"><label for="pre_tigerair_email" class="ml-2">虎航行程確認單（在Email裡）📧</label></li>
                <li><input type="checkbox" id="pre_visit_japan_web"><label for="pre_visit_japan_web" class="ml-2">Visit Japan Web入境手續 ✅</label></li>
                <li><input type="checkbox" id="pre_travel_insurance"><label for="pre_travel_insurance" class="ml-2">旅平險 🛡️</label></li>
                <li><input type="checkbox" id="pre_credit_card"><label for="pre_credit_card" class="ml-2">申辦日本旅遊信用卡 💳</label></li>
                <li><input type="checkbox" id="pre_japan_sim"><label for="pre_japan_sim" class="ml-2">日本網卡 📶</label></li>
                <li><input type="checkbox" id="pre_common_meds"><label for="pre_common_meds" class="ml-2">常用藥物購買（防止胃脹氣、胃酸過多；消炎止痛藥、透氣膠帶、ＯＫ蹦）🩹</label></li>
                <li><input type="checkbox" id="pre_rest_order"><label for="pre_rest_order" class="ml-2">餐廳事前預約🫕</label></li>
            </ul>
            <h3 class="font-display text-2xl mt-8 mb-4">旅遊必備品</h3>
            <ul class="list-none space-y-3">
                <li><input type="checkbox" id="item_passport"><label for="item_passport" class="ml-2">護照 🛂</label></li>
                <li><input type="checkbox" id="item_phone"><label for="item_phone" class="ml-2">手機 📱</label></li>
                <li><input type="checkbox" id="item_charger"><label for="item_charger" class="ml-2">充電器 🔌</label></li>
                <li><input type="checkbox" id="item_power_bank"><label for="item_power_bank" class="ml-2">行動電源 🔋</label></li>
                <li><input type="checkbox" id="item_universal_adapter"><label for="item_universal_adapter" class="ml-2">萬國充 🌍</label></li>
                <li><input type="checkbox" id="item_wallet"><label for="item_wallet" class="ml-2">錢包（信用卡）💰</label></li>
                <li><input type="checkbox" id="item_yen"><label for="item_yen" class="ml-2">日圓（ATM領取或兌換）💴</label></li>
                <li><input type="checkbox" id="item_clothes"><label for="item_clothes" class="ml-2">換洗衣物（三天份）👕👖</label></li>
                <li><input type="checkbox" id="item_motion_sickness_med"><label for="item_motion_sickness_med" class="ml-2">暈車藥吃了沒 💊</label></li>
                <li><input type="checkbox" id="item_room_key"><label for="item_room_key" class="ml-2">房門鑰匙 🔑</label></li>
                <li><input type="checkbox" id="item_water_bottle"><label for="item_water_bottle" class="ml-2">水瓶（一點點水）💧</label></li>
                <li><input type="checkbox" id="item_waist_bag"><label for="item_waist_bag" class="ml-2">腰包 👝</label></li>
                <li><input type="checkbox" id="item_backpack"><label for="item_backpack" class="ml-2">方便攜帶的後背包 🎒</label></li>
                <li><input type="checkbox" id="item_earplugs"><label for="item_earplugs" class="ml-2">醫用耳塞與牙間刷 👂</label></li>
                <li><input type="checkbox" id="item_twd_cash"><label for="item_twd_cash" class="ml-2">台幣現鈔（5000以內以備不時之需）💵</label></li>
            </ul>
        `
    };

    document.addEventListener('DOMContentLoaded', () => {
        // --- Dynamic Content Insertion ---
        document.querySelector('#itinerary .prose-custom').innerHTML = contentData.itinerary;
        document.querySelector('#attractions .prose-custom').innerHTML = contentData.attractions;
        document.querySelector('#transportation .prose-custom').innerHTML = contentData.transportation;
        document.getElementById('shopping-checklist').innerHTML = contentData.shoppingList;
        document.getElementById('pre-trip-checklist').innerHTML = contentData.checklist;


        // Recalculate food cost for two people
        const mealCostsPerPerson = {
            '路地裏咖哩 侍 下北澤店': 2255,
            '白髭泡芙工房': 999,
            'Village Vanguard Diner Shimokitazawa': 2999,
            'えくぶり': 999,
            '吟味焼肉 じゃんか 道玄坂': 4999,
            '人形町今半 銀座店': 15972,
            'ココフル': 1999,
            'とんこつラーメン博多風龍 秋葉原総本店': 1999,
            'とんかつ檍のカレー屋 いっぺこっぺ 秋葉原店': 1999,
            '超商晚餐': 1000, // Estimate
            '超商早餐': 800, // Estimate
            '餐車午餐': 1500, // Estimate for Bitcoin food truck
            '隨意午餐': 1500, // Estimate
            '機場晚餐': 2000 // Estimate
        };

        const itineraryMeals = [
            mealCostsPerPerson['超商晚餐'], // Day 1
            mealCostsPerPerson['超商早餐'], mealCostsPerPerson['路地裏咖哩 侍 下北澤店'], mealCostsPerPerson['白髭泡芙工房'], mealCostsPerPerson['Village Vanguard Diner Shimokitazawa'], // Day 2
            mealCostsPerPerson['えくぶり'], mealCostsPerPerson['餐車午餐'], mealCostsPerPerson['吟味焼肉 じゃんか 道玄坂'], // Day 3
            0, mealCostsPerPerson['ココフル'], mealCostsPerPerson['人形町今半 銀座店'], // Day 4 (Breakfast from previous day)
            mealCostsPerPerson['超商早餐'], mealCostsPerPerson['とんこつラーメン博多風龍 秋葉原総本店'], mealCostsPerPerson['とんかつ檍のカレー屋 いっぺこっぺ 秋葉原店'], // Day 5
            0, mealCostsPerPerson['隨意午餐'], mealCostsPerPerson['機場晚餐'] // Day 6 (Breakfast from previous day)
        ];
        
        const totalFoodCostPerPerson = itineraryMeals.reduce((sum, cost) => sum + (cost || 0), 0);
        const totalFoodCostTwoPeople = totalFoodCostPerPerson * 2;


        const tripData = {
            costsJPY: {
                accommodation: 80905, // (8540+8450)/0.21
                transportation: 17000, // 8500 * 2
                food: totalFoodCostTwoPeople, 
                shopping: 71429, // 15000 NTD / 0.21
                tickets: 150
            },
            costsNTD: {
                flights: 33076,
                prep: (878 + 394 + 159) * 2
            },
            exchangeRate: 0.21
        };
        
        const calculateTotal = () => {
            const totalJPY = Object.values(tripData.costsJPY).reduce((sum, cost) => sum + cost, 0);
            const jpyInNtd = totalJPY * tripData.exchangeRate;
            const totalNTD = jpyInNtd + tripData.costsNTD.flights + tripData.costsNTD.prep;
            
            document.getElementById('totalCost').textContent = `NTD ${Math.round(totalNTD).toLocaleString()}`;

            const budgetTableBody = document.querySelector('#budget tbody');
            const budgetTableFoot = document.querySelector('#budget tfoot');
            budgetTableBody.innerHTML = `
                <tr><td class="font-medium">機票</td><td class="text-right">-</td><td class="text-right">${tripData.costsNTD.flights.toLocaleString()}</td></tr>
                <tr><td class="font-medium">住宿</td><td class="text-right">${tripData.costsJPY.accommodation.toLocaleString()}</td><td class="text-right">${Math.round(tripData.costsJPY.accommodation * tripData.exchangeRate).toLocaleString()}</td></tr>
                <tr><td class="font-medium">交通</td><td class="text-right">${tripData.costsJPY.transportation.toLocaleString()}</td><td class="text-right">${Math.round(tripData.costsJPY.transportation * tripData.exchangeRate).toLocaleString()}</td></tr>
                <tr><td class="font-medium">餐飲</td><td class="text-right">${tripData.costsJPY.food.toLocaleString()}</td><td class="text-right">${Math.round(tripData.costsJPY.food * tripData.exchangeRate).toLocaleString()}</td></tr>
                <tr><td class="font-medium">購物與雜項</td><td class="text-right">${tripData.costsJPY.shopping.toLocaleString()}</td><td class="text-right">${Math.round(tripData.costsJPY.shopping * tripData.exchangeRate).toLocaleString()}</td></tr>
                <tr><td class="font-medium">景點門票</td><td class="text-right">${tripData.costsJPY.tickets.toLocaleString()}</td><td class="text-right">${Math.round(tripData.costsJPY.tickets * tripData.exchangeRate).toLocaleString()}</td></tr>
                <tr><td class="font-medium">行前準備</td><td class="text-right">-</td><td class="text-right">${tripData.costsNTD.prep.toLocaleString()}</td></tr>
            `;
            budgetTableFoot.innerHTML = `<tr><td>總計</td><td class="text-right">¥${totalJPY.toLocaleString()}</td><td class="text-right">NTD ${Math.round(totalNTD).toLocaleString()}</td></tr>`;

            return { totalJPY, totalNTD };
        };


        const revealElements = document.querySelectorAll('.reveal');
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('active');
                }
            });
        }, { threshold: 0.1 });
        revealElements.forEach(el => observer.observe(el));

        const setupNavigation = () => {
            const navLinks = document.querySelectorAll('.nav-links a');
            const sections = document.querySelectorAll('main section');
            const mobileNav = document.getElementById('mobile-nav');
            
            window.addEventListener('scroll', () => {
                let current = '';
                sections.forEach(section => {
                    const sectionTop = section.offsetTop;
                    if (pageYOffset >= sectionTop - 100) { current = section.getAttribute('id'); }
                });

                navLinks.forEach(link => {
                    link.classList.remove('active');
                    if(link.getAttribute('href') === `#${current}`) { link.classList.add('active'); }
                });
                
                if (mobileNav.value !== `#${current}`) { mobileNav.value = `#${current}`; }
            });
        };

        const setupCharts = () => {
            Chart.defaults.color = 'rgba(234, 234, 234, 0.8)';
            Chart.defaults.font.family = "'Noto Sans TC', sans-serif";
            const commonTooltip = {
                backgroundColor: 'rgba(30, 30, 30, 0.9)', titleFont: { size: 14, weight: 'bold' },
                bodyFont: { size: 12 }, padding: 10, cornerRadius: 6,
                borderColor: 'rgba(247, 183, 51, 0.5)', borderWidth: 1
            };

            const costLabels = ['機票', '住宿', '餐飲', '購物', '行前準備', '交通', '景點門票'];
            const costValuesNTD = [
                tripData.costsNTD.flights,
                tripData.costsJPY.accommodation * tripData.exchangeRate,
                tripData.costsJPY.food * tripData.exchangeRate,
                tripData.costsJPY.shopping * tripData.exchangeRate,
                tripData.costsNTD.prep,
                tripData.costsJPY.transportation * tripData.exchangeRate,
                tripData.costsJPY.tickets * tripData.exchangeRate
            ];

            const donutCtx = document.getElementById('budgetDonutChart')?.getContext('2d');
            if (donutCtx) {
                new Chart(donutCtx, {
                    type: 'doughnut',
                    data: {
                        labels: costLabels,
                        datasets: [{
                            data: costValuesNTD,
                            backgroundColor: ['#4f46e5', '#ec4899', '#f59e0b', '#10b981', '#6366f1', '#8b5cf6', '#d946ef'],
                            borderColor: '#f8f9fa', borderWidth: 4,
                        }]
                    },
                    options: {
                        responsive: true, maintainAspectRatio: false,
                        plugins: { 
                            legend: { 
                                position: 'bottom', 
                                labels: { 
                                    padding: 20,
                                    color: '#343a40'
                                } 
                            }, 
                            tooltip: commonTooltip 
                        }
                    }
                });
            }

            const barCtx = document.getElementById('expenseBarChart')?.getContext('2d');
            if(barCtx) {
                const barLabels = ['住宿', '交通', '餐飲', '購物', '景點'];
                const barValuesJPY = [ 
                    tripData.costsJPY.accommodation,
                    tripData.costsJPY.transportation,
                    tripData.costsJPY.food,
                    tripData.costsJPY.shopping,
                    tripData.costsJPY.tickets
                ];
                new Chart(barCtx, {
                    type: 'bar',
                    data: { labels: barLabels, datasets: [{
                        label: '預估花費 (JPY)', data: barValuesJPY,
                        backgroundColor: 'rgba(79, 70, 229, 0.6)', borderColor: 'rgba(79, 70, 229, 1)', borderWidth: 1
                    }]},
                    options: {
                        indexAxis: 'y', responsive: true, maintainAspectRatio: false,
                        scales: { 
                            x: { grid: { color: '#e5e7eb' }, ticks: { color: '#4b5563' } }, 
                            y: { grid: { display: false }, ticks: { color: '#4b5563' } } 
                        },
                        plugins: { legend: { display: false }, tooltip: { ...commonTooltip, callbacks: {
                            label: function(context) {
                                const valueJPY = context.raw;
                                const valueNTD = Math.round(valueJPY * tripData.exchangeRate);
                                return `日圓: ¥${valueJPY.toLocaleString()} | 新台幣: NT$${valueNTD.toLocaleString()}`;
                            }
                        }}}
                    }
                });
            }
        };
        
        const setupTabs = (containerSelector, btnSelector, contentSelector) => {
            const container = document.querySelector(containerSelector);
            if (!container) return;
            container.addEventListener('click', e => {
                if (!e.target.matches(btnSelector)) return;
                const button = e.target;
                const tabButtons = container.querySelectorAll(btnSelector);
                const tabContents = container.querySelectorAll(contentSelector);
                const tabId = button.dataset.tab || button.dataset.attractionTab || button.dataset.transportationTab;
                tabButtons.forEach(btn => btn.classList.remove('active'));
                button.classList.add('active');
                tabContents.forEach(content => content.classList.toggle('hidden', content.id !== tabId));
            });
        };

        const setupNestedTabs = () => {
            const attractionsSection = document.getElementById('attractions');
            if (!attractionsSection) return;
            const categoryButtons = attractionsSection.querySelectorAll('.category-tab-btn');
            const categoryContents = attractionsSection.querySelectorAll('.category-tab-content');

            categoryButtons.forEach(catButton => {
                catButton.addEventListener('click', () => {
                    categoryButtons.forEach(btn => btn.classList.remove('active'));
                    catButton.classList.add('active');
                    const categoryId = catButton.dataset.categoryTab;
                    categoryContents.forEach(content => content.classList.toggle('hidden', content.id !== categoryId));
                    const activeCategory = document.getElementById(categoryId);
                    if(activeCategory) {
                        const firstAttractionBtn = activeCategory.querySelector('.attraction-tab-btn');
                        if(firstAttractionBtn) firstAttractionBtn.click();
                    }
                });
            });

            attractionsSection.querySelectorAll('.category-tab-content').forEach(category => {
                const attractionButtons = category.querySelectorAll('.attraction-tab-btn');
                const attractionContents = category.querySelectorAll('.attraction-content');
                attractionButtons.forEach(attBtn => {
                    attBtn.addEventListener('click', (e) => {
                        e.stopPropagation();
                        attractionButtons.forEach(btn => btn.classList.remove('active'));
                        attBtn.classList.add('active');
                        const attractionId = attBtn.dataset.attractionTab;
                        attractionContents.forEach(content => content.classList.toggle('hidden', content.id !== attractionId));
                    });
                });
            });
        };

        const setupChecklists = () => {
            document.querySelectorAll('.interactive-checklist').forEach(list => {
                const storageKey = list.id + '-state';
                const savedState = JSON.parse(localStorage.getItem(storageKey)) || {};
                list.querySelectorAll('input[type="checkbox"]').forEach(input => {
                    if (savedState[input.id]) { input.checked = true; }
                });
                list.addEventListener('change', e => {
                    if (e.target.type === 'checkbox') {
                        const currentState = JSON.parse(localStorage.getItem(storageKey)) || {};
                        currentState[e.target.id] = e.target.checked;
                        localStorage.setItem(storageKey, JSON.stringify(currentState));
                    }
                });
            });
        };

        const highlightCurrentDay = () => {
            const tripStartDate = new Date('2025-08-18T00:00:00');
            const today = new Date();
            const diffTime = today - tripStartDate;
            if (diffTime < 0) return; 
            const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24)) + 1;
            if (diffDays >= 1 && diffDays <= 6) {
                const currentDayTab = document.querySelector(`.tab-btn[data-tab="day${diffDays}"]`);
                if (currentDayTab) { currentDayTab.click(); }
            }
        };
        
        // --- 🚀 執行所有初始化 ---
        calculateTotal();
        setupNavigation();
        setupCharts();
        setupTabs('#itinerary', '.tab-btn', '.tab-content');
        setupTabs('#transportation', '.transportation-tab-btn', '.transportation-content');
        setupNestedTabs();
        setupChecklists();
        highlightCurrentDay();
    });
    </script>
</body>
</html>
